<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to the mzR package in R • mzR</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to the mzR package in R">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">mzR</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/mzR.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/mzR-EN.html">Introduction to the mzR package in R</a>
    </li>
    <li>
      <a href="../articles/mzR-intern.html">Erste schritte mzR (intern)</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/statistikat/mzR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Introduction to the mzR package in R</h1>
                        <h4 class="author">Gregor de Cillia</h4>
            
            <h4 class="date">2018-03-21</h4>
      
      <small>Source: <a href="https:/github.com/statistikat/mzR/blob/master/vignettes/mzR-EN.Rmd"><code>vignettes/mzR-EN.Rmd</code></a></small>

    </div>

    
    
<div class="contents">
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The <code>mzR</code> package (mz is short for the German word Mikrozensus, the survey that incorporates the Austrian Labour Force Survey (LFS)) is an in-house <code>R</code> package at Statistics Austria (STAT) developed for computing estimates of sampling error, coefficient of variation and confidence limits for basically any estimator derived from LFS data. More specifically, it is also possible to estimate the sampling error of the net change of an indicator, e.g. year-to-year changes of annual averages.</p>
</div>
<div id="quick-introduction-to-error-estimation-with-a-bootstrap-procedure" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-introduction-to-error-estimation-with-a-bootstrap-procedure" class="anchor"></a>Quick Introduction to Error Estimation with a Bootstrap Procedure</h2>
<p>For estimating the error with the help of a bootstrap procedure, a certain number b of bootstrap samples are drawn from the original sample. Since the Austrian LFS is a rotating household sample without replacement drawn from a finite population, a “rescaled” bootstrap procedure as introduced by Rao and Wu 1988 is applied, leading to non-integer occurence frequencies. The bootstrap weights computed with these occurence frequencies are then calibrated using the same iterative proportional updating (IPU) method as for the original sampling weights.</p>
<p>To account for the rotational sample, only observations rotating into the sample are supplied with new bootstrap weights while the bootstrap weights pertaining to the remaining part of the sample, i.e. the overlap, are reutilized. To determine the standard error and the approximate 95% confidence interval of the population estimate of some population parameter we use the b bootstrap weights to compute said estimator b times. The standard deviation of these b computed estimates is then the estimated standard error while the 2.5% and 97.5% quantiles correspond to the lower and upper boundaries of the approximate 95% confidence interval. For a more detailed description please refer to Meraner et al. (accepted for publication).</p>
</div>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<p>We install the mzR package with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"statistikat/mzR"</span>)</code></pre></div>
<p>alternatively, the package can also be installed from a <code>.zip</code> archive.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"...Pfad.../mzR_1.0.0.zip"</span>, <span class="dt">repos =</span> <span class="ot">NULL</span>, <span class="dt">type =</span> <span class="st">"binary"</span>)</code></pre></div>
<p>At the beginning of our R session we load the package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"mzR"</span>)</code></pre></div>
<p>Call up the help documentation for the mzR package</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help</span>(<span class="dt">package=</span>mzR)</code></pre></div>
<p>or for a specific function contained in the package, e.g. ImportData():</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><a href="../reference/ImportData.html">?ImportData</a></code></pre></div>
</div>
<div id="read-files" class="section level2">
<h2 class="hasAnchor">
<a href="#read-files" class="anchor"></a>Read files</h2>
<div id="stat-users" class="section level3">
<h3 class="hasAnchor">
<a href="#stat-users" class="anchor"></a>STAT users</h3>
<p>To import the Austrian LFS data we are interested in as well as the corresponding bootstrap weights which are stored separately we use the following function which is based on STAT file management and only works in-house:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/ImportData.html">ImportData</a></span>(<span class="dt">year =</span> <span class="ot">NULL</span>, <span class="dt">quarter =</span> <span class="ot">NULL</span>, <span class="dt">comp_diff_lag =</span> <span class="ot">NULL</span>,
  <span class="dt">from =</span> <span class="ot">NULL</span>, <span class="dt">to =</span> <span class="ot">NULL</span>, <span class="dt">hh =</span> <span class="ot">FALSE</span>, <span class="dt">families =</span> <span class="ot">FALSE</span>,
  <span class="dt">whichVar =</span> <span class="ot">NULL</span>, <span class="dt">nbw =</span> <span class="ot">NULL</span>, <span class="dt">weightDecimals =</span> <span class="dv">2</span>)</code></pre></div>
<p>To find out more about this function and its parameters we can open the help page with <code><a href="../reference/ImportData.html">?ImportData</a></code>, as mentioned above.</p>
<p>Let’s say we want to compute certain yearly estimates, e.g. for the year 2014. To do this we have to read in the data into first:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ImportData.html">ImportData</a></span>(<span class="dt">year=</span><span class="dv">2014</span>)</code></pre></div>
<p>If we only want to import quarterly data, e.g. the 4th quarter 2014, we have to set the parameter quarter as well:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ImportData.html">ImportData</a></span>(<span class="dt">year=</span><span class="dv">2014</span>,<span class="dt">quarter=</span><span class="dv">4</span>)</code></pre></div>
<p>To compute net changes of certain indicators, e.g. year-to-year changes from 2013 to 2014 we have to set the parameter comp_diff_lag to the desired time lag (in years):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ImportData.html">ImportData</a></span>(<span class="dt">year=</span><span class="dv">2014</span>,<span class="dt">comp_diff_lag=</span><span class="dv">1</span>)</code></pre></div>
<p>If we are interested in changes between quarterly time points, e.g. changes from the 4th quarter 2013 to the 4th quarter 2014, we set the the parameter comp_diff_lag to the desired time lag (in quarters):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ImportData.html">ImportData</a></span>(<span class="dt">year=</span><span class="dv">2014</span>,<span class="dt">quarter=</span><span class="dv">4</span>, <span class="dt">comp_diff_lag=</span><span class="dv">4</span>)</code></pre></div>
<p>If we are only interested in estimating household indicators we can restrict the imported data to the reference persons of the households (bstell=0) by setting the parameter hh:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ImportData.html">ImportData</a></span>(<span class="dt">year=</span><span class="dv">2014</span>,<span class="dt">quarter=</span><span class="dv">4</span>, <span class="dt">comp_diff_lag=</span><span class="dv">1</span>, <span class="dt">hh=</span><span class="ot">TRUE</span>)</code></pre></div>
<p>To reduce memory usage, which might be necessary for certain data and certain computers, and if we do not need all the variables contained in the data, we can set the parameter whichVar to the selection of variables we actually want to work with, e.g. age, gender and region:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ImportData.html">ImportData</a></span>(<span class="dt">year=</span><span class="dv">2014</span>,<span class="dt">quarter=</span><span class="dv">4</span>, <span class="dt">whichVar=</span><span class="kw">c</span>(<span class="st">"balt"</span>,<span class="st">"bsex"</span>,<span class="st">"xnuts2"</span>))</code></pre></div>
<p>If we are only interested in estimating indicators concerning families, we can restrict the imported data to the reference persons of families (xfstell=1) with the parameter families:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ImportData.html">ImportData</a></span>(<span class="dt">year=</span><span class="dv">2014</span>,<span class="dt">quarter=</span><span class="dv">4</span>, <span class="dt">comp_diff_lag=</span><span class="dv">1</span>, <span class="dt">families=</span><span class="ot">TRUE</span>)</code></pre></div>
<p>Sometimes we would like things to go faster for testing purposes. In such cases we can reduce the number of imported bootstrap weights to e.g. 5:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ImportData.html">ImportData</a></span>(<span class="dt">year=</span><span class="dv">2014</span>,<span class="dt">quarter=</span><span class="dv">4</span>, <span class="dt">comp_diff_lag=</span><span class="dv">1</span>, <span class="dt">nbw=</span><span class="dv">5</span>)</code></pre></div>
<p>If we do not want to import a specific quarter or year but a time span, we use the parameters from and to:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ImportData.html">ImportData</a></span>(<span class="dt">from=</span><span class="kw">c</span>(<span class="dv">2011</span>,<span class="dv">1</span>),<span class="dt">to=</span><span class="kw">c</span>(<span class="dv">2014</span>,<span class="dv">4</span>))</code></pre></div>
</div>
<div id="external-users" class="section level3">
<h3 class="hasAnchor">
<a href="#external-users" class="anchor"></a>External users</h3>
<p>For external users, i.e. users of LFS data who have no access to the STAT file management, the function IndivImportData() does the trick. At the moment, this function works best for LFS data but it can also be applied to other data sets with certain limitations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/IndivImportData.html">IndivImportData</a></span>(curr_inFile, curr_inFile_bw, <span class="dt">prev_inFile =</span> <span class="ot">NULL</span>,
  <span class="dt">prev_inFile_bw =</span> <span class="ot">NULL</span>, <span class="dt">whichVar =</span> <span class="ot">NULL</span>, <span class="dt">mergeBy =</span> <span class="st">"asbhh"</span>, <span class="dt">nbw =</span> <span class="ot">NULL</span>,
  <span class="dt">bwNames =</span> <span class="ot">NULL</span>, <span class="dt">weightName =</span> <span class="st">"gew1"</span>, <span class="dt">weightDecimals =</span> <span class="dv">2</span>)</code></pre></div>
<p>LFS data provided by Statistics Austria to external users (so called dg8-files) can be read in by specifying the file paths.</p>
<p>For quarterly data we only have to specify two paths, the path of the LFS data (curr_inFile) and the path of the bootstrap weights (curr_inFile_bw):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_dg8_file &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"...path.../dg8.mz2014Q1.sav"</span>)
my_bootstrapweights &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"...path.../mz2_2014q1_bootweights.csv.gz"</span>)
dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/IndivImportData.html">IndivImportData</a></span>(<span class="dt">curr_inFile=</span>my_dg8_file, <span class="dt">curr_inFile_bw=</span>my_bootstrapweights)</code></pre></div>
<p>For yearly data, the parameters curr_inFile and curr_inFile_bw are character vectors containing all the paths of the quarterly files needed to construct the yearly data set:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_dg8_files &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"...path.../dg8.mz2014Q1.sav"</span>,
                  <span class="st">"...path.../dg8.mz2014Q2.sav"</span>,
                  <span class="st">"...path.../dg8.mz2014Q3.sav"</span>,
                  <span class="st">"...path.../dg8.mz2014Q4.sav"</span>)
my_bootstrapweights &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"...path.../mz2_2014q1_bootweights.csv.gz"</span>,
                         <span class="st">"...path.../mz2_2014q2_bootweights.csv.gz"</span>,
                         <span class="st">"...path.../mz2_2014q3_bootweights.csv.gz"</span>,
                         <span class="st">"...path.../mz2_2014q4_bootweights.csv.gz"</span>)
dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/IndivImportData.html">IndivImportData</a></span>(<span class="dt">curr_inFile=</span>my_dg8_files, <span class="dt">curr_inFile_bw=</span>my_bootstrapweights)</code></pre></div>
<p>If we are interested in estimating the changes of indicators for certain time points we have to specify prev_inFile and <code>prev_inFile_bw</code> as well. Furthermore, <code><a href="../reference/IndivImportData.html">IndivImportData()</a></code> also supports the parameters whichVar and nbw as introduced above, in Section 4.1. To import data other than LFS dg8 data we might have to specify the names of the weights (weightName) and the bootstrap weights (<code>bwNames</code>) as they will probably be different from the LFS naming conventions. Also the variable(s) used for merging the bootstrap weights to the survey data will probably need to be set in the parameter <code>mergeBy</code></p>
</div>
<div id="import-additional-data" class="section level3">
<h3 class="hasAnchor">
<a href="#import-additional-data" class="anchor"></a>Import Additional Data</h3>
<p>If we want to read in additional data and merge it to data already imported with ImportData() or IndivImportData() we can use the following function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/ImportAndMerge.html">ImportAndMerge</a></span>(x, curr_inFile, <span class="dt">prev_inFile =</span> <span class="ot">NULL</span>, <span class="dt">mergeBy =</span> <span class="st">"asbper"</span>,
  <span class="dt">whichVar =</span> <span class="ot">NULL</span>)</code></pre></div>
<p>As an example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_additional_data &lt;-<span class="st"> "...path.../additional.data.mz2014q4.sav"</span>
dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ImportAndMerge.html">ImportAndMerge</a></span>(dat, <span class="dt">curr_inFile=</span>my_additional_data)</code></pre></div>
</div>
</div>
<div id="variable-labels" class="section level2">
<h2 class="hasAnchor">
<a href="#variable-labels" class="anchor"></a>Variable Labels</h2>
<p>The Austrian LFS data usually comes with variable labels. We can get retrieve these labels with the function GetLabels(), e.g. the labels for the regional variable xnuts2 (Austrian federal states) of data set dat are queried via:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">"mzTestData"</span>)
<span class="kw"><a href="../reference/GetLabels.html">GetLabels</a></span>(mzTestData,<span class="dt">var=</span><span class="st">"xnuts2"</span>)
<span class="co">#&gt; $xnuts2</span>
<span class="co">#&gt; $xnuts2$label</span>
<span class="co">#&gt; [1] "NUTS-2 regions (Austrian federal states)"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $xnuts2$value.labels</span>
<span class="co">#&gt;    Vorarlberg         Tyrol      Salzburg Upper Austria        Styria </span>
<span class="co">#&gt;            34            33            32            31            22 </span>
<span class="co">#&gt;     Carinthia        Vienna Lower Austria    Burgenland </span>
<span class="co">#&gt;            21            13            12            11</span></code></pre></div>
</div>
<div id="estimates-for-categorical-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#estimates-for-categorical-variables" class="anchor"></a>Estimates for Categorical Variables</h2>
<p>Estimates (est) of group sizes and group rates for categorical variables as well as the corresponding estimated standard errors (sd), coefficients of variation (cv) and lower/upper confidence limits (cil_2.5%, ciu_97.5%) are computed with the functions GroupSize() and GroupRate().</p>
<div id="groupsize" class="section level3">
<h3 class="hasAnchor">
<a href="#groupsize" class="anchor"></a>GroupSize()</h3>
<p>The function contains the following parameters:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/GroupSize.html">GroupSize</a></span>(x, <span class="dt">TFstring =</span> <span class="ot">NULL</span>, <span class="dt">each =</span> <span class="ot">NULL</span>, <span class="dt">thousands_separator =</span> <span class="ot">TRUE</span>, <span class="dt">digits =</span> <span class="dv">2</span>)</code></pre></div>
<p>Example: The number of unemployed people (xerwstat==2) aged 15-74 (balt&gt;=15 &amp; balt&lt;=74) for the 4th quarter 2013 and the 4th quarter 2014 as well as the changes between these two time points is computed as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/GroupSize.html">GroupSize</a></span>(mzTestData, <span class="dt">TFstring =</span> <span class="st">"xerwstat==2 &amp; balt&gt;=15 &amp; balt&lt;=74"</span>)
<span class="co">#&gt;                        est          sd          cv    cil_2.5%</span>
<span class="co">#&gt; year2           258,847.97   185,932.8        0.72   83,024.03</span>
<span class="co">#&gt; year1           336,981.66   355,645.5        1.06    5,364.08</span>
<span class="co">#&gt; Absolute change -78,133.69   340,417.5       -4.36 -356,939.05</span>
<span class="co">#&gt; Relative change     -23.19 9,513,740.1 -410,316.71      -81.31</span>
<span class="co">#&gt;                    ciu_97.5%</span>
<span class="co">#&gt; year2              520,470.4</span>
<span class="co">#&gt; year1              801,720.5</span>
<span class="co">#&gt; Absolute change    387,517.8</span>
<span class="co">#&gt; Relative change 19,146,156.7</span></code></pre></div>
</div>
<div id="grouprate" class="section level3">
<h3 class="hasAnchor">
<a href="#grouprate" class="anchor"></a>GroupRate()</h3>
<p>The function contains the following parameters:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">GroupRate</span>(x, TFstring, <span class="dt">TFstring2 =</span> <span class="ot">NULL</span>, <span class="dt">each =</span> <span class="ot">NULL</span>, <span class="dt">byeach =</span> <span class="ot">TRUE</span>,
  <span class="dt">thousands_separator =</span> <span class="ot">TRUE</span>, <span class="dt">digits =</span> <span class="dv">2</span>)</code></pre></div>
<p>Example: The unemployment rate, i.e. the number of unemployed (xerwstat==2) by the number of unemployed and employed (xerwstat%in%c(1,2)) aged 15-74 for the 4th quarter 2013 and the 4th quarter 2014 as well as the changes between these two time points is computed as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">GroupRate</span>(mzTestData, <span class="dt">TFstring =</span> <span class="st">"xerwstat==2 &amp; balt&gt;=15 &amp; balt&lt;=74"</span>,
          <span class="dt">TFstring2 =</span> <span class="st">"xerwstat%in%c(1,2) &amp; balt&gt;=15 &amp; balt&lt;=74"</span>)
<span class="co">#&gt;                    est           sd          cv cil_2.5%     ciu_97.5%</span>
<span class="co">#&gt; year2             5.89         3.82        0.65     1.73         10.44</span>
<span class="co">#&gt; year1             6.58         7.73        1.17     0.09         17.79</span>
<span class="co">#&gt; Absolute change  -0.69         7.33      -10.61    -7.96          8.14</span>
<span class="co">#&gt; Relative change -10.50 8,966,973.30 -854,080.27   -80.91 18,045,846.98</span></code></pre></div>
</div>
</div>
<div id="estimates-for-numerical-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#estimates-for-numerical-variables" class="anchor"></a>Estimates for Numerical Variables</h2>
<p>Estimates (est) of totals and means for numerical variables as well as the corresponding estimated standard errors (sd), coefficients of variation (cv) and lower/upper confidence limits (cil_2.5%, ciu_97.5%) are computed with the functions Total() and Mean(). The functions contain the following parameters</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/TotalMean.html">Total</a></span>(x, <span class="dt">TFstring =</span> <span class="ot">NULL</span>, <span class="dt">each =</span> <span class="ot">NULL</span>, var, <span class="dt">negativeZero =</span> <span class="ot">TRUE</span>,
      <span class="dt">thousands_separator =</span> <span class="ot">TRUE</span>, <span class="dt">digits =</span> <span class="dv">2</span>)
<span class="kw">Mean</span>(x, <span class="dt">TFstring =</span> <span class="ot">NULL</span>, <span class="dt">each =</span> <span class="ot">NULL</span>, var, <span class="dt">negativeZero =</span> <span class="ot">TRUE</span>,
     <span class="dt">thousands_separator =</span> <span class="ot">TRUE</span>, <span class="dt">digits =</span> <span class="dv">2</span>)
<span class="kw">Median</span>(x, <span class="dt">TFstring =</span> <span class="ot">NULL</span>, <span class="dt">each =</span> <span class="ot">NULL</span>, var, <span class="dt">negativeZero =</span> <span class="ot">TRUE</span>,
       <span class="dt">thousands_separator =</span> <span class="ot">TRUE</span>, <span class="dt">digits =</span> <span class="dv">2</span>)</code></pre></div>
<div id="total" class="section level3">
<h3 class="hasAnchor">
<a href="#total" class="anchor"></a>Total()</h3>
<p>Example: The number of hours worked (variables estund and dtstd) by people aged 15-74 for the 4th quarter 2013 and the 4th quarter 2014 as well as the changes between these two time points is computed as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/TotalMean.html">Total</a></span>(mzTestData, <span class="dt">TFstring=</span><span class="st">"xerwstat==1 &amp; balt&gt;=15 &amp; balt&lt;=74"</span>, <span class="dt">var=</span><span class="st">"estund*13 + dtstd*13"</span>)
<span class="co">#&gt;                              est             sd    cv         cil_2.5%</span>
<span class="co">#&gt; year2           1,671,374,942.14 232,757,050.50  0.14 1,549,405,938.58</span>
<span class="co">#&gt; year1           1,829,623,967.55 252,284,180.55  0.14 1,421,018,572.91</span>
<span class="co">#&gt; Absolute change  -158,249,025.41 280,771,848.82 -1.77  -115,533,834.66</span>
<span class="co">#&gt; Relative change            -8.65          17.84 -2.06            -5.64</span>
<span class="co">#&gt;                    ciu_97.5%</span>
<span class="co">#&gt; year2           2.131948e+09</span>
<span class="co">#&gt; year1           2.001863e+09</span>
<span class="co">#&gt; Absolute change 5.126075e+08</span>
<span class="co">#&gt; Relative change 3.539000e+01</span></code></pre></div>
</div>
<div id="mean" class="section level3">
<h3 class="hasAnchor">
<a href="#mean" class="anchor"></a>Mean()</h3>
<p>Example: The average number of hours worked (variables estund and dtstd) by gender (Variable bsex) of people aged 15-74 for the 4th quarter 2013 and the 4th quarter 2014 as well as the changes between these two time points is computed as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Mean</span>(mzTestData, <span class="dt">TFstring=</span><span class="st">"xerwstat==1 &amp; balt&gt;=15 &amp; balt&lt;=74"</span>, <span class="dt">var=</span><span class="st">"estund + dtstd"</span>,
     <span class="dt">each=</span><span class="st">"bsex"</span>)
<span class="co">#&gt; $bsex_1</span>
<span class="co">#&gt;                   est    sd   cv cil_2.5% ciu_97.5%</span>
<span class="co">#&gt; year2           33.36  4.32 0.13    33.38     43.27</span>
<span class="co">#&gt; year1           32.39  3.00 0.09    29.23     36.44</span>
<span class="co">#&gt; Absolute change  0.96  5.97 6.19     0.24     13.69</span>
<span class="co">#&gt; Relative change  2.98 20.65 6.94     0.71     46.94</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $bsex_2</span>
<span class="co">#&gt;                   est    sd   cv cil_2.5% ciu_97.5%</span>
<span class="co">#&gt; year2           29.02  3.49 0.12    24.10     32.36</span>
<span class="co">#&gt; year1           25.80  7.75 0.30    10.40     29.88</span>
<span class="co">#&gt; Absolute change  3.22  4.98 1.55     2.18     13.85</span>
<span class="co">#&gt; Relative change 12.48 59.01 4.73     7.37    140.77</span></code></pre></div>
</div>
</div>
<div id="export-results" class="section level2">
<h2 class="hasAnchor">
<a href="#export-results" class="anchor"></a>Export Results</h2>
<p>If we want to save the results from Sections 6 and 7 in a CSV-file we can do so with the following function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">export</span>(x, <span class="dt">outFilePath =</span> <span class="kw">getwd</span>(), <span class="dt">outFileName =</span> <span class="ot">NULL</span>)</code></pre></div>
<p>As an example, we export our result to the CSV-file “D:/myTestFile.csv”:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">i_want_out &lt;-<span class="st"> </span><span class="kw">Mean</span>(dat,<span class="dt">TFstring=</span><span class="st">"xerwstat==1 &amp; balt&gt;=15 &amp; balt&lt;=74"</span>,
                   <span class="dt">var=</span><span class="st">"estund + dtstd"</span>, <span class="dt">each=</span><span class="st">"xnuts2"</span>)
<span class="kw">export</span>(i_want_out, <span class="dt">outFilePath=</span><span class="st">"D:"</span>, <span class="dt">outFileName=</span><span class="st">"myTestFile"</span>)</code></pre></div>
<p>If no path is specified, the CSV-file is generated in the working directory which can be determined with getwd(). If no file name is specified, a default file name depending on the underlying function from Sections 6 and 7 is used.</p>
</div>
<div id="memory" class="section level2">
<h2 class="hasAnchor">
<a href="#memory" class="anchor"></a>Memory</h2>
<p>To make mzR run more smoothly when using large data sets, try to restrict the number of (large) objects you keep/load in/to your work environment (you can list the objects in your work environment with ls()) and maybe do some garbage collection (gc()). It might also help to reduce the number of variables in the imported data to the ones you need for the analysis you are doing. This is accomplished e.g. with the parameter whichVar in the import functions ImportData() and IndivImportData(). To increase computation speed for test purposes you can also set a limit to the number of bootstrap weights, i.e. with the parameter nbw.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#quick-introduction-to-error-estimation-with-a-bootstrap-procedure">Quick Introduction to Error Estimation with a Bootstrap Procedure</a></li>
      <li><a href="#getting-started">Getting started</a></li>
      <li><a href="#read-files">Read files</a></li>
      <li><a href="#variable-labels">Variable Labels</a></li>
      <li><a href="#estimates-for-categorical-variables">Estimates for Categorical Variables</a></li>
      <li><a href="#estimates-for-numerical-variables">Estimates for Numerical Variables</a></li>
      <li><a href="#export-results">Export Results</a></li>
      <li><a href="#memory">Memory</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Gregor de Cillia, Alexander Kowarik, Angelika Meraner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
